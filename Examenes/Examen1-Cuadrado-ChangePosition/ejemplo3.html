<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EXAMEN CUADRADOS</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <script>
        // CAMBIAR EVENTO MY MOVE EN CHANGE COLOR 
        // AGREGAR EVENT EN LA CREACION DEL CUADRADO

        var numCuadradoId = 1;
        var numCuadrado = 1;

        for (let i = 0; i < 8; i++) {
            // CREAR CUADRADO
            var cuadrado = document.createElement('div')
            cuadrado.classList.add('caja')
            cuadrado.classList.add('gris')
            cuadrado.id = numCuadradoId++;
            cuadrado.innerText = numCuadrado++;
            // cuadrado.addEventListener('click', crearCuadradoCirculos)
            // cuadrado.addEventListener('click', myMove)
            // CREAR CIRCULOS
            var circulo1 = document.createElement('div')
            circulo1.classList.add('circulo')
            circulo1.classList.add('top-left')

            var circulo2 = document.createElement('div')
            circulo2.classList.add('circulo')
            circulo2.classList.add('top-right')

            var circulo3 = document.createElement('div')
            circulo3.classList.add('circulo')
            circulo3.classList.add('bottom-left')

            var circulo4 = document.createElement('div')
            circulo4.classList.add('circulo')
            circulo4.classList.add('bottom-right')

            cuadrado.appendChild(circulo1)
            cuadrado.appendChild(circulo2)
            cuadrado.appendChild(circulo3)
            cuadrado.appendChild(circulo4)
            document.body.appendChild(cuadrado)
        }

        var posFinal = 625;

        //
        var id = 8;
        var idColor = 8;

        function myMove() {
            // document.getElementById("8").removeEventListener('click', myMove, true)
            if (id != 1) {
                document.getElementById(id).addEventListener('click', changeColor)
            }
            let idMove = null;
            var pos = 0;
            var elem = document.getElementById(id);
            console.log(elem)
            clearInterval(idMove);
            idMove = setInterval(frame, 5);
            function frame() {
                if (pos == posFinal) {
                    clearInterval(idMove);
                } else {
                    pos++;
                    elem.style.top = pos + "px";
                    // elem.style.backgroundColor = "yellow";
                    elem.style.left = "25px";
                    elem.removeEventListener('click', myMove)
                }
            }

            // document.getElementById(id).removeEventListener('click', myMove, true)
            id--;
            posFinal = posFinal - 75;
            if (id != 1) {
                document.getElementById(id).addEventListener('click', myMove)
            }
        }

        function changeColor() {
            let id = this.id
            var elem = document.getElementById(id);
            elem.style.backgroundColor = "yellow";
            for (let i = 1; i < 5; i++) {
                elem.childNodes[i].classList.add("active-circulo");
            }
        }

        document.getElementById("8").addEventListener('click', myMove)

    </script>

</body>
</html>